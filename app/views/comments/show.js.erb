$(function() {
	var $comment = $('<%= j(render(@comment)) %>');
	var $comment_existent = $('#' + $comment.attr('id'));
	if (!!$comment_existent.length) {
		$comment_existent.replaceWith($comment);
	} else {
		<% if @comment.commentable_type != 'Comment' %>
			<% if params[:next].present? %>
				$('#comments').append($comment);
			<% else %>
				$('#comments').prepend($comment);
			<% end %>
		<% else %>
			$('#comments_<%= @comment.commentable_id %>').append($comment);
		<% end %>
	};
});